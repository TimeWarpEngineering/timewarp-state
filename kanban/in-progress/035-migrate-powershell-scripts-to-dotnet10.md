# Migrate PowerShell Scripts to .NET 10 C# Single File Apps

## Description
Migrate all PowerShell (.ps1) scripts in the codebase to .NET 10 C# single file applications using TimeWarp.Nuru for command-line parsing and TimeWarp.Amuru for shell command execution.

## Scripts to Migrate

### GitHub Workflow Scripts (CRITICAL - Used in CI/CD)
1. **.github/workflows/build.ps1** - Orchestrates build process for GitHub Actions
2. **.github/workflows/test.ps1** - Runs all test suites in CI/CD
3. **.github/workflows/common.ps1** - Shared utility functions for workflow scripts
4. **.github/scripts/sync-configurable-files.ps1** - Synchronizes configuration files from parent repositories (444 lines)

### Root Directory Scripts
5. **build-nugets.ps1** - Build and package NuGet packages
6. **build-and-package-analyzer.ps1** - Build and package the analyzer project
7. **convert-timestamp.ps1** - Timestamp conversion utility
8. **run-tests.ps1** - Test runner script
9. **run-e2e-tests.ps1** - End-to-end test runner (376 lines - most complex)
10. **run-test-app.ps1** - Test application launcher
11. **cline.ps1** - CLI utility script (consider removal - may be obsolete)

### Scripts Directory
12. **scripts/build-readme.ps1** - README documentation builder

### Sample Scripts
13. **samples/03-routing/wasm/sample-03-wasm/run.ps1** - Sample application runner

### Auto-generated Scripts (Excluded)
- Tests/Test.App.EndToEnd.Tests/bin/Debug/net9.0/playwright.ps1 (generated by Playwright)

## Requirements
- Use .NET 10 SDK
- Create single file C# console applications
- Use **TimeWarp.Nuru** for command-line parsing and CLI functionality
- Use **TimeWarp.Amuru** for strongly-typed shell command execution

## Implementation Examples

### Using TimeWarp.Nuru for CLI
```csharp
using TimeWarp.Nuru;

var app = NuruApp.Create(args);

app.Command("build", "Build NuGet packages", async () =>
{
    // Implementation
});

await app.RunAsync();
```

### Using TimeWarp.Amuru for Shell Commands
```csharp
using TimeWarp.Amuru;

// Strongly-typed dotnet commands
await DotNet.Build()
    .WithConfiguration("Release")
    .WithNoRestore()
    .ExecuteAsync();

await DotNet.Pack()
    .WithConfiguration("Release")
    .WithOutput("./artifacts")
    .ExecuteAsync();

await DotNet.Test()
    .WithConfiguration("Debug")
    .WithNoBuild()
    .ExecuteAsync();

// Generic shell commands
var result = await Shell.Run("git")
    .WithArguments("status", "--short")
    .ExecuteAsync();
```

## Benefits
- Cross-platform compatibility without PowerShell dependency
- Better performance and startup time
- Strongly typed code with compile-time checking
- Strongly typed shell commands via TimeWarp.Amuru
- Easier debugging and testing
- Consistent technology stack (all C#/.NET)
- Better IDE support and IntelliSense
- Leverage TimeWarp ecosystem tools

## Implementation Notes
- Each PowerShell script should become a separate C# console application
- Use TimeWarp.Nuru for all CLI argument parsing and command structure
- Use TimeWarp.Amuru for all shell command execution (dotnet commands, git, etc.)
- Consider creating a shared library for common functionality
- Ensure proper async/await patterns
- Add comprehensive XML documentation comments
- Leverage TimeWarp.Amuru's strongly-typed command builders for safety

## Testing
- Test each migrated application on Windows, Linux, and macOS
- Ensure all existing functionality is preserved
- Verify performance improvements
- Create unit tests where applicable
- Test TimeWarp.Amuru command execution accuracy

## Migration Phases

### Phase 1: Critical Infrastructure (HIGH Priority)
- Create shared library for common functions (from common.ps1)
- Migrate .github/workflows/build.ps1 → TimeWarp.State.Build
- Migrate .github/workflows/test.ps1 → TimeWarp.State.Test
- Migrate run-e2e-tests.ps1 → TimeWarp.State.E2ETestRunner

### Phase 2: Build Tools (MEDIUM Priority)
- Migrate build-nugets.ps1 → TimeWarp.State.BuildNugets
- Migrate build-and-package-analyzer.ps1 → TimeWarp.State.BuildAnalyzer
- Migrate run-tests.ps1 → TimeWarp.State.TestRunner

### Phase 3: Utilities (LOW Priority)
- Migrate convert-timestamp.ps1 → TimeWarp.State.TimestampConverter
- Migrate scripts/build-readme.ps1 → TimeWarp.State.BuildReadme
- Migrate run-test-app.ps1 → TimeWarp.State.RunTestApp
- Migrate sample run scripts

### Phase 4: Complex Scripts
- Migrate .github/scripts/sync-configurable-files.ps1 → TimeWarp.State.SyncConfig
  - Consider using Octokit.NET for GitHub API interactions

## Priority
HIGH - GitHub workflow scripts are critical for CI/CD pipeline. The migration should start with Phase 1 to ensure build and test infrastructure remains functional.